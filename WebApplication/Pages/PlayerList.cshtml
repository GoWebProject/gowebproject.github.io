@page
@using WebApplication.Models
@model PlayerListModel
@{
    ViewData["Title"] = "Список Участников";
}
<h1>@ViewData["Title"]</h1>

@{
    var uname = Request.Cookies["username"];
    var curUser = uname != null ? UserManager.GetUser(uname) : null;
    var isAdmin = curUser is {AccessLevel: 1 };
}
<table class="table table-striped">
    <thead>
    <tr>
        <th scope="col">№</th>
        <th scope="col">Имя</th>
        <th scope="col">Рейтинг</th>
        @{
            if (isAdmin)
            {
                <th scope="col">Действия</th>
            }
        }
    </tr>
    </thead>
    <tbody>
    @{
        var users = await UserManager.GetUsers("rating desc");
        for (var i = 0; i < users.Count; i++)
        {
            var user = users[i];
            <tr>
                <th scope="row">@(i + 1)</th>
                <td>@user.FullName</td>
                <td>@user.RfgRating</td>
                @{
                    if (isAdmin)
                    {
                        <td>
                            <button type="button" class="btn btn-success" data-toggle="tooltip" data-placement="top" title="Изменить данные пользователя">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button type="button" class="btn btn-danger" data-toggle="tooltip" data-placement="top" title="Удалить пользователя">
                                <i class="far fa-trash-alt"></i>
                            </button>
                        </td>
                    }
                }
            </tr>
        }
    }
    </tbody>
</table>